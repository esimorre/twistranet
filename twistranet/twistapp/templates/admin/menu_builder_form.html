{% extends "base.html" %}
{% load i18n %}
{% block local_css %}
<link rel="stylesheet" href="{% url twistranet_home %}static/css/tn_menu_builder.css" type="text/css" media="screen" />
{% endblock %}
{% block local_js %}
<script type="text/javascript" src="{% url twistranet_home %}static/js/tn_menu_builder.js" charset="utf-8"></script>
{% endblock %}
{% block content %}
  <div id="menu-builder">
    <div id="menu-management">
      {% comment%}
      <div class="nav-tabs-nav">
        <div class="nav-tabs-arrow nav-tabs-arrow-left" style="display: none;"><a>«</a></div>
        <div class="nav-tabs-wrapper">
          {% for menu in topmenus %}
            <span class="nav-tab nav-tab-active">{{ menu.label }}</span>
          {% endfor %}
          <a class="nav-tab menu-add-new"
             href="{% url menu_create %}">
             <abbr title="Add a menu">+</abbr>
          </a>
        </div>
        <div class="nav-tabs-arrow nav-tabs-arrow-right" style="display: none;"><a>»</a></div>
      </div>
      {% endcomment%}
      <div id="menu_edit_left">
        <div id="add-custom-links" class="postbox ">
          <h3>{% trans 'Add external link' %}</h3>
          <div class="inside">
            <form action="{{ path }}" 
                  method="post">
              {% for field in links_form %}
                  {% if not field.is_hidden %}
                      <div class="fieldWrapper">
                          {{ field.errors }}
                          {{ field.label_tag }} {{ field }}
                          {% if field.help_text %}
                              <span class="hint">{{ field.help_text }}
                                  <span class="hint-pointer">&nbsp;</span>
                              </span>
                          {% endif %}
                          <div class="clear"><!-- --></div>
                      </div>
                  {% else %}
                      {{ field }}
                  {% endif %}
              {% endfor %}
              <div class="postboxcontrol">
                <input type="submit" name="submit" value="{% trans 'Add to menu' %}" />
              </div>
            </form>
          </div>
        </div>
        <div id="add-view" class="postbox ">
          <h3>{% trans 'Add internal view' %}</h3>
          <div class="inside">
            <form action="{{ path }}"
                  method="post">
              {% for field in view_form %}
                  {% if not field.is_hidden %}
                      <div class="fieldWrapper">
                          {{ field.errors }}
                          {{ field.label_tag }} {{ field }}
                          {% if field.help_text %}
                              <span class="hint">{{ field.help_text }}
                                  <span class="hint-pointer">&nbsp;</span>
                              </span>
                          {% endif %}
                          <div class="clear"><!-- --></div>
                      </div>
                  {% else %}
                      {{ field }}
                  {% endif %}
              {% endfor %}
              <div class="postboxcontrol">
                <input type="submit" name="submit" value="{% trans 'Add to menu' %}" />
              </div>
            </form>
          </div>
        </div>
        <div id="add-community" class="postbox ">
          <h3>{% trans 'Add community' %}</h3>
          <div class="inside">

          </div>
        </div>
      </div>
      <div id="menu_edit_main">
        <form action="{{ path }}" 
              method="post"
              id="menu-edit-form"
              class="edit-form enableAutoFocus enableUnloadProtect">
            <fieldset>
            {% autoescape off %}
              {{ mainmenu }}
            {% endautoescape %}
            <ul id="menu-to-delete">
            </ul>
            <input type="hidden" id="menu-id" name="menu-id" value="{{menu.id}}" />
            {% csrf_token %}
            <div class="form-controls">
              <input type="submit" value="{% trans 'Save' %}" /> 
              <button type="button" class="reset">{% trans 'Undo' %}</button>
              <input type="hidden" id="referer_url" value="{{referer_url}}" name="referer_url" />
            </div>
            </fieldset>
        </form>
        <div id="item-model">
            {% autoescape off %}
              {{ item_model }}
            {% endautoescape %}
        </div>
      </div>
    </div>
  </div>
{% endblock %}
